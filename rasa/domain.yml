version: "2.0"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - mood_great
  - mood_unhappy
  - bot_challenge
  - start_intent
  - new_start_intent
  - logout:
      use_entities:
        - action_requested
  - login:
      use_entities:
        - action_requested
  - signup:
      use_entities:
        - action_requested
  - change_layout:
      use_entities:
        - object_requested
        - layout_requested
  - select_document:
      use_entities:
        - object_requested
        - document_requested

actions:
  - action_logout
  - action_check_session_login
  - action_check_session_signup
  - action_logout_to_login_cancellation
  - action_logout_to_signup_cancellation
  - action_login
  - action_signup
  - action_store_session_slots
  - action_change_layout
  - action_open_document
  - validate_signup_form

forms:
  login_form:
    username:
      - type: from_text
    password:
      - type: from_text
  signup_form:
    username:
      - type: from_text
    password:
      - type: from_text
    password_confirmation:
      - type: from_text
  document_selection_form:
    document_requested:
      - type: from_text

entities:
  - sessionid
  - csrftoken
  - csrfmiddlewaretoken
  - username
  - password
  - password_confirmation
  - action_requested
  - object_requested
  - layout_requested
  - document_requested

slots:
  requested_slot:
    type: text
    influence_conversation: false
  sessionid:
    type: text
    influence_conversation: false
    auto_fill: true
  csrftoken:
    type: text
    influence_conversation: false
    auto_fill: true
  csrfmiddlewaretoken:
    type: text
    influence_conversation: false
    auto_fill: true
  username:
    type: text
    influence_conversation: false
    auto_fill: true
  password:
    type: text
    influence_conversation: false
    auto_fill: true
  password_confirmation:
    type: text
    influence_conversation: false
    auto_fill: true
  document_requested:
    type: text
    auto_fill: true
  layout_requested:
    type: text
    auto_fill: true

responses:
  utter_greet:
  - text: "Hey! Need something?"
  - text: "Hello! Can I help you with anything?"

  utter_greet_again:
  - text: "How else can I help you?"
  - text: "What else can I do for you?"

  utter_cheer_up:
  - text: "Here is something to cheer you up:"
    image: "https://i.imgur.com/nGF1K8f.jpg"

  utter_did_that_help:
  - text: "Did that help you?"

  utter_happy:
  - text: "Great, carry on!"

  utter_goodbye:
  - text: "Bye"

  utter_iamabot:
  - text: "I am a bot, powered by Rasa."

  utter_logout_confirmation:
  - text: "Sure you want to log out?"

  utter_logout_cancellation:
  - text: "Okay! I will not log you out"

  utter_logout_to_login:
  - text: "You are already logged in, do you want me to log you out to start a new session?"

  utter_logout_to_signup:
  - text: "I need to close your current session in order to register the new user, is that ok?"

  utter_ask_username:
  - text: "What is your username?"

  utter_ask_signup_form_username:
  - text: "What username would you like to have?"

  utter_ask_login_form_password:
  - text: "and the password?"

  utter_ask_signup_form_password:
  - text: "What password do you want to set?"

  utter_ask_signup_form_password_confirmation:
  - text: "Please retype the password to confirm it"

  utter_layout_selection:
  - text: "To which layout do you want to change?"
    buttons:
      - title: "Tree"
        payload: '/change_layout{{"object_requested":"layout","layout_requested":"tree"}}'
      - title: "Force"
        payload: '/change_layout{{"object_requested":"layout","layout_requested":"force"}}'
      - title: "Radial"
        payload: '/change_layout{{"object_requested":"layout","layout_requested":"radial"}}'
      - title: "Circle"
        payload: '/change_layout{{"object_requested":"layout","layout_requested":"treeMap"}}'

  utter_ask_document_selection_form_document_requested:
  - text: "Which document do you want to open?"

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true

config:
  store_entities_as_slots: true
